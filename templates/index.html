<!-- templates/index.html --> 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash Royale API</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <h1>Bem-Vindo ao Clash Royale API</h1>
    <ul>
        <li><a href="{{ url_for('battle_bp.get_decks_with_more_than_x_percent_wins') }}">Obter baralhos vencedores</a></li>
        <li><a href="{{ url_for('battle_bp.get_losses_for_combo') }}">Obter Perdas para Combo</a></li>
    </ul>

    <h2>Obter Percentual de Vitórias e Derrotas</h2>
    <form action="{{ url_for('battle_bp.get_win_loss_percentage_for_card') }}" method="get">
        <label for="cardId">Card ID:</label>
        <input type="text" id="cardId" name="cardId" required>
        <br>
        <label for="startTime">Start Time:</label>
        <input type="text" id="startTime" name="startTime" required>
        <br>
        <label for="endTime">End Time:</label>
        <input type="text" id="endTime" name="endTime" required>
        <br>
        <button type="submit">Submit</button>
    </form>


<form id="winning-decks-form">
    <input type="number" name="percentage" placeholder="Porcentagem">
    <input type="datetime-local" name="startTime" placeholder="Data de Início">
    <input type="datetime-local" name="endTime" placeholder="Data de Fim">
    <button type="submit">Obter Baralhos Vencedores</button>
</form>

<script>
    document.getElementById('winning-decks-form').onsubmit = function(e) {
        e.preventDefault(); // Evita o envio padrão do formulário

        const formData = new FormData(e.target);
        const data = {
            percentage: formData.get('percentage'),
            startTime: formData.get('startTime'),
            endTime: formData.get('endTime')
        };

        fetch('/api/battles/winning-decks', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    };
</script>

</body>
</html>
